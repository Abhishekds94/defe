<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content="width=device-width,height=device-height, initial-scale=1, shrink-to-fit=yes">
    <meta name="twitter:title" content="devfeed">
    <meta property="og:title" content="devfeed" />
    
    <meta name="keywords" content="devtools, feed, devfeed, developers">
    <meta name="description" content="A News aggregator for Developers">
    <meta property="og:description" content="A News aggregator for Developers"/>
    <meta name="twitter:description" content="A News aggregator for Developers">
    
    <meta name="theme-color" content="#75D608" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#75D608">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@bhupeshimself">
    
    <meta property="og:url" content="" >
    <!--     <meta property="og:image" content=""/> -->
    <meta property="og:image:width" content="640" />
    <meta property="og:image:height" content="360" />
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" type="text/css" href="static/style.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <!--     <meta name="twitter:image" content="">
    <link rel="shortcut icon" type="image/png" href="images/logo.png"/> -->
    <title>devfeed</title>
  </head>
  <body>
    <div class="topnav" id="myTopnav">
      <a href="#home" class="active">Home</a>
      <a href="#news">News</a>
      <a href="#contact">Contact</a>
      <div class="dropdown">
        <button class="dropbtn">Dropdown
        <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content">
          <a href="#">Link 1</a>
          <a href="#">Link 2</a>
          <a href="#">Link 3</a>
        </div>
      </div>
      <a href="#about">About</a>
      <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="myFunction()">&#9776;</a>
    </div>
    {% block header %}{% endblock %}
    <div id="filter-feed">
        <h3>Filter </h1>
        <input id="feed-input" list="filter" placeholder="Filter By Website">
        <datalist id="filter">
            <option value="HackerNoon">
            <option value="freeCodeCamp">
            <option value="itsfoss">
            <option value="TechCrunch">
            <option value="ProductHunt">
            <option value="opensource.com">
            <option value="dev.to">
            <option value="Reddit">
        </datalist>
        <button type="button" id="fetchfeed" onclick="fetch_feed()" >Filter</button>

    </div>
    {% block container %}
      
    {% endblock %}
    <script src="/static/feed.js"></script>
    <script>
    window.onload = function() {
        registerSW();
    };
    async function registerSW() {
        if ('serviceWorker' in navigator) {
            try {
                await navigator.serviceWorker.register('static/sw.js');
            } catch (e) {
                //SW registration failed
            }
        }
    }

    function myFunction() {
        var x = document.getElementById("myTopnav");
        if (x.className === "topnav") {
            x.className += " responsive";
        } else {
            x.className = "topnav";
        }
    }
    function share(title, link) {
        if (navigator.share) {
            navigator.share({
            title: title,
            url: link,
            })
            .then(() => console.log('Successful Share'))
            .catch((error) => console.log('Error sharing', error));
        }
    }
    </script>
    <script type="text/javascript">
        var input = document.getElementById("feed-input");
        input.addEventListener("keyup", function(event) {
          if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById("fetchfeed").click();
          }
        });
        var filter_by = document.getElementById("feed-input");
        filter_by.addEventListener("input", function(event) {
            console.log("datalist workin");
            console.log(filter_by.value);
            if (filter_by.value == "Reddit"){
                container1 = document.getElementById("filter-feed");
                //var subreddit = document.createElement("div");
                var input = document.createElement("input");
                input.setAttribute("name", "subreddit");
                input.setAttribute("list", "subreddit");
                data_list = document.createElement("datalist");
                data_list.setAttribute("id", "subreddit");
                input.appendChild(data_list);
    /*          <input name="subreddit" list="subreddit" />
                <datalist id="subreddit"></datalist> */
                container1.appendChild(input);
                var subreddit_options = ["programming", "Android", "webdev", "technology", "python", "javascript", "learnprogramming", "software", "startups", "tech", "web_design", "linux", "computing", "coding", "AskTechnology"];
                var options = '';

                for(var i = 0; i < subreddit_options.length; i++)
                    options += '<option value="'+subreddit_options[i]+'" />';

                document.getElementById('subreddit').innerHTML = options;
            }
        });
    </script>
  </body>
</html>